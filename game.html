<!DOCTYPE html>
<head>
    <title>Rock Paper Scissors</title>
    <style>
        body {
            background-color:  rgb(197, 234, 245);
        }
        h1 {
            
            text-align: center;
            background-color:rgb(197, 234, 245);
            color: rgb(247, 209, 104);
            font-family:Arial, Helvetica, sans-serif;
            position: relative;
            width: 50%;
            left: 25%;
            right: 25%;
            padding: 15px;
        }
        .startGame {
            position:relative;
            left: 35%;
            right: 35%;
            width: 30%;
            padding: 10px;
            font-size: medium;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            
        }

    </style>
</head>
<body>
    <h1>Rock Paper Scissors</h1> <br>
    <button class="startGame" onclick = "game()">Press to Start Game</button>
    <div>
        
        <p class ="para1"></p>
        <input type = "text">
        <button class="userInput" onclick= "entered()">Submit</button>
         <p class ="para2"></p>
    </div>

<script>
//start game - make sure they say yes
//p1 ask for rock paper or scissors.  only accept rock paper or scissors
//onclick submit button, start function to generate computer input,
//how the game went, and who won / lost.  only one function uses document values.
//p2 says who won, and keeps score.

function game()
{

    let start = prompt("Would you like to play a game out of five of Rock, Paper Scissors? (yes/no)")
    
    while (start.toLowerCase() !== "yes" && start.toLowerCase() !== "no")
    {
        start = prompt("Invalid input.  Enter 'yes' or 'no'. ")
    }

    if (start.toLowerCase() === "no") 
    {
        return false;
    }

    while (start.toLowerCase() === "yes")
    {
        const para1 = document.querySelector('p.para1');

        let playerScore = 0;
        let computerScore = 0;
       
        for (let i = 0; i < 5; i++)
        {
          
          para1.textContent = "Enter rock, paper, or scissors";
          
          if (entered() === true)
          {
          let result = play(); 


           if (result.slice(0, 3) == "Sor")
         {
              ++computerScore;
         }
         else if (result.slice(0,3) == "Con")
         {
             ++playerScore;
         }
          
          const para2 = document.querySelector("para2");
          para2 = result + " The Score is now player: " + playerScore + " computer: " + computerScore + "."
          
          if (finished())
          {
              break;
          }
          
          }       
        }
        start = prompt("You have finished the game. Would you like a rematch? (yes / no)");

        while (start.toLowerCase() !== "yes" && start.toLowerCase() !== "no")
         {
            start = prompt("Invalid input.  Enter 'yes' or 'no'. ")
         }
        
    }
    return false;
}

    function finished()
    {
        const para2 = document.querySelector("para2");
        if (playerScore > 4 - i)
          {
              let matches = i + 1
              let final = "You have won the game! You have scored " + playerScore + " while the computer has scored "
              + computerScore + " in a total of " + matches  + " matches."
              para2 = final;
              return true;
          }
          if (computerScore === playerScore && i == 4)
            {
                let final = "You have played all 5 matches and have tied with the computer with a score of " + 
                computerScore + ".";
                para2 = final;
                return true;
            }
          if(computerScore > 4 - i)
          {
            let matches = i + 1
              let final = "You have lost the game! You have scored " + playerScore + " while the computer has scored "
              + computerScore + " in a total of " + matches  + " matches."
              para2 = final;
              return true;
          }
          return false;
    }

    function entered()
    {
        const input = document.querySelector('input');
        const para2 = document.querySelector('para2');

        while (input.toLowerCase() !== "rock" && input.toLowerCase() != "paper" && input.toLowerCase() != "scissors")
        {
            para2.textContent = "Invalid input.  Enter either rock, paper, or scissors.";
        }
        return true;
    }

    function play()
    {
       
        const input = document.querySelector('input');

        let computer = computerPlay();
        let outcome = winner(input, computer);
        if (outcome === "lost")
        {
            return "Sorry, you have lost.  You chose " + input.toLowerCase() + " and the computer chose " + computer.toLowerCase() + ".";
;
        }
        else if (outcome == "tie")
        {
            return "You have tied.  Both you and the computer chose " + input.toLowerCase() + ".";
;
        }
        else
        {
            return "Congratulations! You have won! You chose " + input.toLowerCase() + " and the computer chose " + computer.toLowerCase() + ".";
;
        }
        return "";

        
    }

    function computerPlay()
    {
        let options = ["Rock", "Paper", "Scissors"];
        let pick = getRandomInt(3);
        return options[pick];
    }

    function winner(player, computer)
    {
        //There is probably a better way to code this.
         
        if (player.toUpperCase() === "SCISSORS" && computer === "Rock") return "lost";
        if (player.toUpperCase() === "ROCK" && computer === "Rock") return "tie";
        if (player.toUpperCase() === "PAPER" && computer === "Rock") return "won";
        if (player.toUpperCase() === "SCISSORS" && computer === "Paper") return "won";
        if (player.toUpperCase() === "ROCK" && computer === "Paper") return "lost";
        if (player.toUpperCase() === "PAPER" && computer === "Paper") return "tie";
        if (player.toUpperCase() === "SCISSORS" && computer === "Scissors") return "tie";
        if (player.toUpperCase() === "ROCK" && computer === "Scissors") return "won";
        if (player.toUpperCase() === "PAPER" && computer === "Scissors") return "lost";
    }

    function getRandomInt(num)
    {
        return Math.floor(Math.random() * Math.floor(num));
    }
</script>
</body>
</html>